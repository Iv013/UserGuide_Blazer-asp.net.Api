@page "/"
@inject IUserServices UserService
@inject NavigationManager NavigationManager
<PageTitle>UserGuide</PageTitle>

<h3 >Список пользователей</h3>


<div class="col-10 ">
    <div class="text-lg-end m-2">
        <button class="btn btn-outline-primary" @onclick="()=>{ShowUser(0);} ">Добавить</button>
    </div>
    <div class="text-lg-end border p-3">
   
        <table class="table table-striped table-hover col-7">
            <thead>
                <tr class="mb-0">
                    <th>Фамилия</th>
                    <th>Имя</th>
                    <th>Отчество</th>
                    <th>Домен\Логин</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in UserService.ListUser)
                {
                    <tr>
                        <td width="20%">@user.LastName</td>
                        <td width="20%">@user.FirstName</td>
                        <td width="20%">@user.Patronymic</td>
                        <td width="30%">@user.UserLogin</td>
                        <td>
                            <div>
                                <button class="btn btn-outline-info" @onclick="()=>{ShowUser(user.Userid);} ">
                                    <i class="oi oi-pencil"></i>
                                </button>
                                <button class="btn btn-outline-danger" @onclick="()=>{DeleteUser(user.Userid);} ">
                                    <i class="oi oi-trash"></i>
                                </button>
                            </div>

                        </td>
                    </tr>
                }


            </tbody>

        </table>
    </div>
    
</div>



@code {
    protected override async Task OnInitializedAsync()
    {
        await UserService.GetUsers();
    }
    void ShowUser(int id) {
        if (id != 0)
        
        NavigationManager.NavigateTo($"user/{id}");
        else NavigationManager.NavigateTo($"user");   
    }
    void DeleteUser(int id)
    {
        NavigationManager.NavigateTo($"deleteUser/{id}");

    }
}
